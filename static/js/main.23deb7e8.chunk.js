(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{201:function(e,t,n){},392:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(181),s=n.n(r),o=n(34),i=n(58),u=n(35),j=(n(201),n(196)),l=n(68),b=n(195),h=n(1);var m=function(e){var t=e.socket,n=e.username,a=e.room,r=e.closeChat,s=Object(c.useState)(""),j=Object(u.a)(s,2),m=j[0],O=j[1],d=Object(c.useState)([]),f=Object(u.a)(d,2),p=f[0],x=f[1],g=Object(c.useState)(""),v=Object(u.a)(g,2),w=v[0],y=v[1],C=Object(c.useState)(""),N=Object(u.a)(C,2),k=N[0],R=N[1],S=Object(c.useState)(""),F=Object(u.a)(S,2),_=F[0],D=F[1],L=Object(c.useRef)();Object(c.useEffect)((function(){function e(){return(e=Object(i.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.emit("enter_room",{text:"(".concat(n,") Has Enter The Room"),room:a});case 2:t.on("Who_enter_room",(function(e){D(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.on("receive_message",(function(e){if(""!==e.img){var t=new Blob([e.img],{type:"file"}),n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){e.img=n.result,x((function(t){return[].concat(Object(l.a)(t),[e])}))}}else x((function(t){return[].concat(Object(l.a)(t),[e])}))})),t.on("Who_left_room",(function(e){D(e)})),function(){e.apply(this,arguments)}()}),[t]),console.log("nameLeftEnterRoom",_);var M=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var c,r,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===m&&""===k){e.next=10;break}return c={author:n,room:a,currentMessage:m,imgName:w,img:k,time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()},e.next=4,t.emit("send_message",c);case 4:""!==c.img?(r=new Blob([c.img],{type:"file"}),(s=new FileReader).readAsDataURL(r),s.onloadend=Object(i.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.img=s.result,x((function(e){return[].concat(Object(l.a)(e),[c])}));case 2:case"end":return e.stop()}}),e)})))):x((function(e){return[].concat(Object(l.a)(e),[c])})),O(""),y(""),R(""),D(""),L.current.value="";case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"chat-window",children:[Object(h.jsxs)("div",{className:"chat-header",children:[Object(h.jsxs)("p",{children:["Live Chat In Room ",a]}),Object(h.jsx)("span",{onClick:r,children:"x"})]}),Object(h.jsx)("div",{className:"chat-body",children:Object(h.jsxs)(b.a,{className:"message-container",children:[p.map((function(e,t){return Object(h.jsx)("div",{className:"message",id:n===e.author?"you":"other",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"message-content ".concat(""!==e.img?"thereImg":e.img),children:""!==e.img?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{src:e.img,alt:e.imgName,style:{width:140,height:"auto"}}),Object(h.jsx)("p",{children:e.currentMessage})]}):Object(h.jsx)("p",{children:e.currentMessage})}),Object(h.jsxs)("div",{className:"message-meta",children:[Object(h.jsx)("p",{id:"time",children:e.time}),Object(h.jsx)("p",{id:"author",children:e.author})]})]})},t)})),""!==_&&Object(h.jsx)("p",{className:"box-left",children:_})]})}),Object(h.jsxs)("div",{className:"chat-footer",children:[Object(h.jsx)("input",{type:"text",value:m,placeholder:"Hey...",onChange:function(e){return O(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&M()}}),Object(h.jsxs)("div",{className:"formInput",children:[Object(h.jsx)("label",{htmlFor:"file",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1",viewBox:"0 0 64 64",children:Object(h.jsx)("path",{d:"M262 487c-47-47-64-77-45-77 4 0 24 17 45 37l38 37V345c0-140 9-186 30-155 5 8 10 78 10 155v139l38-37c40-39 52-45 52-24 0 12-99 117-111 117-2 0-28-24-57-53zM157 84c-20-20 7-24 164-24 132 0 170 3 167 13-4 9-47 13-164 15-88 1-163-1-167-4z",transform:"matrix(.1 0 0 -.1 0 64)"})})}),Object(h.jsx)("input",{type:"file",id:"file",onChange:function(e){y(e.target.files[0].name),R(e.target.files[0])},onKeyPress:function(e){return"Enter"===e.key&&M()},ref:L,className:"inputCuFile"})]}),Object(h.jsx)("button",{onClick:M,children:"\u25ba"})]})]})},O=j.a.connect("http://localhost:3001");var d=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(u.a)(r,2),j=s[0],l=s[1],b=Object(c.useState)(!1),d=Object(u.a)(b,2),f=d[0],p=d[1],x=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.emit("leave_room",{text:"(".concat(n,") Has Left!!"),room:j});case 2:p(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"App",children:f?Object(h.jsx)(m,{socket:O,username:n,room:j,closeChat:x}):Object(h.jsxs)("div",{className:"joinChatContainer",children:[Object(h.jsx)("h3",{children:"Join A Chat"}),Object(h.jsx)("input",{type:"text",placeholder:"John...",onChange:function(e){return a(e.target.value)}}),Object(h.jsx)("input",{type:"text",placeholder:"Room ID...",onChange:function(e){return l(e.target.value)}}),Object(h.jsx)("button",{onClick:function(){""!==n&&""!==j&&(O.emit("join_room",j),p(!0))},children:"Join A Room"})]})})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,393)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(d,{})}),document.getElementById("root")),f()}},[[392,1,2]]]);
//# sourceMappingURL=main.23deb7e8.chunk.js.map